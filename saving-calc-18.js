window.buttonsListSaving = [
    {currencySymbol: '$', countryFlag: 'ðŸ‡ºðŸ‡¸', currencyName: 'USD', currencyDescription: 'United States dollar'},
    {currencySymbol: 'â‚¬', countryFlag: 'ðŸ‡ªðŸ‡º', currencyName: 'EUR', currencyDescription: 'Euro'},
    {currencySymbol: 'Ø¯.Ø¥', countryFlag: 'ðŸ‡¦ðŸ‡ª', currencyName: 'AED', currencyDescription: 'United Arab Emirates Dirham'},
    {currencySymbol: 'A$', countryFlag: 'ðŸ‡¦ðŸ‡º', currencyName: 'AUD', currencyDescription: 'Australian Dollar'},
    {currencySymbol: 'Ð›Ð².', countryFlag: 'ðŸ‡§ðŸ‡¬', currencyName: 'BGN', currencyDescription: 'Bulgarian Lev'},
    {currencySymbol: 'C$', countryFlag: 'ðŸ‡¨ðŸ‡¦', currencyName: 'CAD', currencyDescription: 'Canadian Dollar'},
    {currencySymbol: 'CHf', countryFlag: 'ðŸ‡¨ðŸ‡­', currencyName: 'CHF', currencyDescription: 'Swiss Franc'},
    {currencySymbol: 'Â¥', countryFlag: 'ðŸ‡¨ðŸ‡³', currencyName: 'CNY', currencyDescription: 'Chinese Yuan'},
    {currencySymbol: 'KÄ', countryFlag: 'ðŸ‡¨ðŸ‡¿', currencyName: 'CZK', currencyDescription: 'Czech Koruna'},
    {currencySymbol: 'Kr.', countryFlag: 'ðŸ‡©ðŸ‡°', currencyName: 'DKK', currencyDescription: 'Danish Krone'},
    {currencySymbol: 'Â£', countryFlag: 'ðŸ‡¬ðŸ‡§', currencyName: 'GBP', currencyDescription: 'British Pound'},
    {currencySymbol: 'HK$', countryFlag: 'ðŸ‡­ðŸ‡°', currencyName: 'HKD', currencyDescription: 'Hong Kong Dollar'},
    {currencySymbol: 'Ft', countryFlag: 'ðŸ‡­ðŸ‡º', currencyName: 'HUF', currencyDescription: 'Hungarian Forint'},
    {currencySymbol: 'Rp', countryFlag: 'ðŸ‡®ðŸ‡©', currencyName: 'IDR', currencyDescription: 'Indonesian Rupiah'},
    {currencySymbol: 'â‚ª', countryFlag: 'ðŸ‡®ðŸ‡±', currencyName: 'ILS', currencyDescription: 'Israeli New Sheqel'},
    {currencySymbol: 'Â¥', countryFlag: 'ðŸ‡¯ðŸ‡µ', currencyName: 'JPY', currencyDescription: 'Japanese Yen'},
    {currencySymbol: '/-', countryFlag: 'ðŸ‡°ðŸ‡ª', currencyName: 'KES', currencyDescription: 'Kenyan Shilling'},
    {currencySymbol: 'Mex$', countryFlag: 'ðŸ‡²ðŸ‡½', currencyName: 'MXN', currencyDescription: 'Mexican Peso'},
    {currencySymbol: 'RM', countryFlag: 'ðŸ‡²ðŸ‡¾', currencyName: 'MYR', currencyDescription: 'Malaysian Ringgit'},
    {currencySymbol: 'kr', countryFlag: 'ðŸ‡³ðŸ‡´', currencyName: 'NOK', currencyDescription: 'Norwegian Krone'},
    {currencySymbol: '$', countryFlag: 'ðŸ‡³ðŸ‡¿', currencyName: 'NZD', currencyDescription: 'New Zealand Dollar'},
    {currencySymbol: 'â‚±', countryFlag: 'ðŸ‡µðŸ‡­', currencyName: 'PHP', currencyDescription: 'Philippine Peso'},
    {currencySymbol: 'zÅ‚', countryFlag: 'ðŸ‡µðŸ‡±', currencyName: 'PLN', currencyDescription: 'Polish Zloty'},
    {currencySymbol: 'lei', countryFlag: 'ðŸ‡·ðŸ‡´', currencyName: 'RON', currencyDescription: 'Romanian New Leu'},
    {currencySymbol: 'Ø±.Ø³', countryFlag: 'ðŸ‡¸ðŸ‡¦', currencyName: 'SAR', currencyDescription: 'Saudi Riyal'},
    {currencySymbol: 'kr', countryFlag: 'ðŸ‡¸ðŸ‡ª', currencyName: 'SEK', currencyDescription: 'Swedish Krona'},
    {currencySymbol: 'S$', countryFlag: 'ðŸ‡¸ðŸ‡¬', currencyName: 'SGD', currencyDescription: 'Singapore Dollar'},
    {currencySymbol: 'à¸¿', countryFlag: 'ðŸ‡¹ðŸ‡­', currencyName: 'THB', currencyDescription: 'Thai Baht'},
    {currencySymbol: 'â‚º', countryFlag: 'ðŸ‡¹ðŸ‡·', currencyName: 'TRY', currencyDescription: 'Turkish Lira'},
    {currencySymbol: 'USh', countryFlag: 'ðŸ‡ºðŸ‡¬', currencyName: 'UGX', currencyDescription: 'Ugandan Shilling'},
    {currencySymbol: 'R', countryFlag: 'ðŸ‡¿ðŸ‡¦', currencyName: 'ZAR', currencyDescription: 'South African Rand'},
    {currencySymbol: "$",countryFlag: "ðŸ‡¦ðŸ‡·",currencyName: "ARS",currencyDescription: "Argentine Peso",},
    {currencySymbol: "Tk",countryFlag: "ðŸ‡§ðŸ‡©",currencyName: "BDT",currencyDescription: "Bangladeshi Taka",},
    {currencySymbol: "R$",countryFlag: "ðŸ‡§ðŸ‡·",currencyName: "BRL",currencyDescription: "Brazilian Real",},
    {currencySymbol: "P",countryFlag: "ðŸ‡§ðŸ‡¼",currencyName: "BWP",currencyDescription: "Botswanan Pula",},
    {currencySymbol: "$",countryFlag: "ðŸ‡¨ðŸ‡±",currencyName: "CLP",currencyDescription: "Chilean Peso",},
    {currencySymbol: "$",countryFlag: "ðŸ‡¨ðŸ‡´",currencyName: "COP",currencyDescription: "Colombian Peso",},
    {currencySymbol: "â‚¡",countryFlag: "ðŸ‡¨ðŸ‡·",currencyName: "CRC",currencyDescription: "Costa Rican ColÃ³n",},
    {currencySymbol: "Â£",countryFlag: "ðŸ‡ªðŸ‡¬",currencyName: "EGP",currencyDescription: "Egyptian Pound",},
    {currencySymbol: "$",countryFlag: "ðŸ‡«ðŸ‡¯",currencyName: "FJD",currencyDescription: "Fijian Dollar",},
    {currencySymbol: "Lari",countryFlag: "ðŸ‡¬ðŸ‡ª",currencyName: "GEL",currencyDescription: "Georgian Lari",},
    {currencySymbol: "GHÂ¢",countryFlag: "ðŸ‡¬ðŸ‡­",currencyName: "GHS",currencyDescription: "Ghanaian Cedi",},
    {currencySymbol: "Q",countryFlag: "ðŸ‡¬ðŸ‡¹",currencyName: "GTQ",currencyDescription: "Guatemalan Quetzal",},
    {currencySymbol: "â‚¹",countryFlag: "ðŸ‡®ðŸ‡³",currencyName: "INR",currencyDescription: "Indian Rupee",},
    {currencySymbol: "â‚©",countryFlag: "ðŸ‡°ðŸ‡·",currencyName: "KRW",currencyDescription: "South Korean Won",},
    {currencySymbol: "â‚¨",countryFlag: "ðŸ‡±ðŸ‡°",currencyName: "LKR",currencyDescription: "Sri Lankan Rupee",},
    {currencySymbol: "Dirham",countryFlag: "ðŸ‡²ðŸ‡¦",currencyName: "MAD",currencyDescription: "Moroccan Dirham",},
    {currencySymbol: "â‚¦",countryFlag: "ðŸ‡³ðŸ‡¬",currencyName: "NGN",currencyDescription: "Nigerian Naira",},
    {currencySymbol: "â‚¨",countryFlag: "ðŸ‡³ðŸ‡µ",currencyName: "NPR",currencyDescription: "Nepalese Rupee",},
    {currencySymbol: "Rs",countryFlag: "ðŸ‡µðŸ‡°",currencyName: "PKR",currencyDescription: "Pakistani Rupee",},
    {currencySymbol: "Shilling",countryFlag: "ðŸ‡¹ðŸ‡¿",currencyName: "TZS",currencyDescription: "Tanzanian Shilling",},
    {currencySymbol: "â‚´",countryFlag: "ðŸ‡ºðŸ‡¦",currencyName: "UAH",currencyDescription: "Ukrainian Hryvnia",},
    {currencySymbol: "â‚«",countryFlag: "ðŸ‡»ðŸ‡³",currencyName: "VND",currencyDescription: "Vietnamese Dong",},
    {currencySymbol: "Franc",countryFlag: "ðŸ‡¨ðŸ‡«",currencyName: "XOF",currencyDescription: "West African CFA Franc",},
    {currencySymbol: "Lek",countryFlag: "ðŸ‡¿ðŸ‡²",currencyName: "ZMW",currencyDescription: "Zambian Kwacha",},
];
 
 window.sellListSaving = [
     {
         currencySymbol: "$",
         countryFlag: "ðŸ‡ºðŸ‡¸",
         currencyName: "USD",
         currencyDescription: "United States dollar",
     },
 ];
 
 window.addEventListener("alpine:init", () => {
     // sort a-z
     buttonsListSaving.sort(function (a, b) {
         var textA = a.currencyName.toUpperCase();
         var textB = b.currencyName.toUpperCase();
         return textA < textB ? -1 : textA > textB ? 1 : 0;
     });
     Alpine.data("saving", () => ({
         open: false,
         checkFrom: false,
         checkTo: false,
         checkDate: true,
         openDescription: false,
         data: {
             sellCurrency: {
                 currencySymbol: "$",
                 countryFlag: "ðŸ‡ºðŸ‡¸",
                 currencyName: "USD",
                 currencyDescription: "United States dollar",
             },
             buyCurrency: {
                 currencySymbol: "â‚¬",
                 countryFlag: "ðŸ‡ªðŸ‡º",
                 currencyName: "EUR",
                 currencyDescription: "Euro",
             },
             valueFrom: "",
             valueTo: "",
             date: "",
             rate: 1,
             totalResult: 0,
             valueFromNumber: "",
             valueToNumber: "",
             koverlyResult: "",
             save: "",
             startOpen: true,
             minDate: "",
         },
 
         init() {
             this.data.date = new Date().toISOString().split("T")[0];
             this.refreshData();
             $('#start').prop('max', function(){
              return new Date().toJSON().split('T')[0];
              });
         },
 
         validateDate() {
             var currentDate = new Date();
             var minDate = new Date(currentDate);
             minDate.setDate(currentDate.getDate() - 90);
             var minDateFormatted = minDate.toISOString().split("T")[0];
             if(this.data.date < minDateFormatted) {
                 this.data.date = minDateFormatted;
                 this.refreshData();
             } else {
                 this.refreshData();
             }
         },
 
         async refreshData() {
             let result;
             try {
                 const response = await fetch(
                     `https://yahoofinance-stocks1.p.rapidapi.com/stock-prices?EndDateInclusive=${this.data.date}&StartDateInclusive=${this.data.date}&Symbol=${this.data.buyCurrency.currencyName}USD=X&OrderBy=Ascending`,
                     {
                         method: "GET",
                         headers: {
                             "X-RapidAPI-Key":
                                 "6672486f35mshf89f62beecbe117p14025ejsn2594d0302357",
                             "X-RapidAPI-Host":
                                 "yahoofinance-stocks1.p.rapidapi.com",
                             Accept: "application/json",
                         },
                     }
                 );
                 result = JSON.parse(await response.text());
                 console.log(result);
             } catch (e) {
                 console.log(e);
             }
             this.data.rate = result.results[0].high;
             console.log(this.data.rate);
             this.calculateValue();
         },
 
         calculateValue() {
             this.data.valueFromNumber = Number(
                 parseFloat(this.data.valueFrom.replace(/,/g, ""))
             );
             this.data.valueToNumber = Number(
                 parseFloat(this.data.valueTo.replace(/,/g, ""))
             );
             if (
                 this.data.valueFromNumber > 0 &&
                 this.data.valueFromNumber !== ""
             ) {
                 this.checkFrom = true;
             } else {
                 this.checkFrom = false;
             }
             if (
                 this.data.valueToNumber > 0 &&
                 this.data.valueFromNumber !== ""
             ) {
                 this.checkTo = true;
             } else {
                 this.checkTo = false;
             }
             if (this.data.date != "") {
                 this.checkDate = true;
             } else {
                 this.checkDate = false;
             }
             if (this.checkFrom && this.checkTo && this.checkDate) {
                 this.data.koverlyResult = this.data.valueToNumber * this.data.rate;
                 this.data.save = this.data.valueFromNumber - this.data.koverlyResult;
                 if(this.data.save > 0) {
                    this.open = true;
                    this.openDescription = false;
                    this.data.save = this.data.save.toLocaleString("en-US", {minimumFractionDigits: 2, maximumFractionDigits: 2});
                 } else {
                    this.open = false;
                    this.openDescription = true;
                 }
             } else {
                 this.open = false;
                 this.openDescription = false;
             }
         },
     }));
 });
